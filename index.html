<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SGB æ¬¾å¼æŒ‘é¸ç³»çµ±</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #d33;
      --glass-bg: rgba(0, 0, 0, 0.6);
      --accent-color: #007bff;
    }

    html, body {
      margin: 0; padding: 0; min-height: 100vh;
      font-family: 'Noto Sans TC', sans-serif;
      color: #fff; background-color: #000;
      background-image: url('images/background/bg-desktop.jpg');
      background-size: cover; background-repeat: no-repeat;
      background-position: center; background-attachment: fixed;
    }

    @media (max-width: 768px) {
      body { background-image: url('images/background/bg-mobile.jpg'); background-attachment: scroll; }
    }

    /* æ­¥é©Ÿé€²åº¦æ¢ */
    .progress-container {
      position: sticky; top: 0; z-index: 100;
      background: rgba(0,0,0,0.8); padding: 15px 10px;
      margin-bottom: 20px; display: flex; justify-content: center; gap: 8px;
    }
    .step-dot {
      width: 25px; height: 6px; background: #444; border-radius: 4px; transition: all 0.3s;
    }
    .step-dot.active { background: var(--primary-color); width: 45px; }

    section {
      display: none; max-width: 1000px; margin: 0 auto; padding: 20px;
      opacity: 0; transform: translateY(20px);
      transition: opacity 0.5s ease, transform 0.5s ease;
      text-align: center;
    }
    section.active { display: block; opacity: 1; transform: translateY(0); }

    .container {
      display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;
      background: var(--glass-bg); padding: 30px 15px;
      border-radius: 20px; backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
    }

    .option {
      flex: 0 0 calc(50% - 20px); max-width: 200px; cursor: pointer;
      opacity: 0; transform: scale(0.9);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .option.show { opacity: 1; transform: scale(1); }

    .option-img {
      width: 100%; aspect-ratio: 1/1; object-fit: cover;
      border-radius: 12px; border: 3px solid transparent;
      transition: all 0.3s; background: #222;
    }
    .option:hover .option-img { border-color: var(--accent-color); transform: translateY(-8px); }

    .label { margin-top: 12px; font-size: 16px; font-weight: bold; line-height: 1.4; }

    .btn-group { margin-top: 30px; display: flex; flex-direction: column; align-items: center; gap: 15px; }
    .back-btn { padding: 10px 25px; background: transparent; color: #ccc; border: 1px solid #666; border-radius: 50px; cursor: pointer; }
    .submit-btn { padding: 15px 40px; font-size: 20px; font-weight: bold; background: #fff; color: #000; border: none; border-radius: 8px; cursor: pointer; }
    .submit-btn:hover { background: var(--primary-color); color: #fff; }

    .summary-card { text-align: left; display: inline-block; margin-bottom: 20px; padding: 25px; background: rgba(255,255,255,0.1); border-radius: 10px; line-height: 2; width: 100%; max-width: 400px; box-sizing: border-box; }
    .summary-card span { color: #ffeb3b; font-weight: bold; }

    @media (max-width: 480px) { .option { flex: 0 0 calc(50% - 10px); } }
  </style>
</head>
<body>

<div class="progress-container" id="progressBar">
  <div class="step-dot active"></div><div class="step-dot"></div><div class="step-dot"></div>
  <div class="step-dot"></div><div class="step-dot"></div><div class="step-dot"></div><div class="step-dot"></div>
</div>

<h2 style="text-align:center">SGB æ¬¾å¼æŒ‘é¸</h2>

<section id="step1" class="active">
  <h3>1. é¸æ“‡é‹å‹•é¡å‹</h3>
  <div class="container" id="sports"></div>
</section>

<section id="step2">
  <h3>2. é¸æ“‡å“é …</h3>
  <div class="container" id="items"></div>
  <div class="btn-group"><button class="back-btn" onclick="showStep('step1')">è¿”å›ä¸Šä¸€æ­¥</button></div>
</section>

<section id="step3">
  <h3>3. é¸æ“‡çƒè¡£ç‰ˆå‹</h3>
  <div class="container" id="jerseyTypes"></div>
  <div class="btn-group"><button class="back-btn" onclick="showStep('step2')">è¿”å›ä¸Šä¸€æ­¥</button></div>
</section>

<section id="step4">
  <h3>4. é¸æ“‡çƒè¤²ç‰ˆå‹</h3>
  <div class="container" id="shortsTypes"></div>
  <div class="btn-group"><button class="back-btn" onclick="showStep('step3')">è¿”å›ä¸Šä¸€æ­¥</button></div>
</section>

<section id="step5">
  <h3>5. é¸æ“‡æ¬¾å¼</h3>
  <div class="container" id="styles"></div>
  <div class="btn-group"><button class="back-btn" id="backToStep5">è¿”å›ä¸Šä¸€æ­¥</button></div>
</section>

<section id="step6">
  <h3>6. é¸æ“‡é…è‰²</h3>
  <div class="container" id="colors"></div>
  <div class="btn-group"><button class="back-btn" id="backToStep6">è¿”å›ä¸Šä¸€æ­¥</button></div>
</section>

<section id="step7">
  <h3>7. ç¢ºèªæ‚¨çš„é¸æ“‡</h3>
  <div class="container">
    <div class="summary-card" id="summary"></div>
    <div style="width: 100%;"><button class="submit-btn" onclick="goToRagic()">å‰å¾€å¡«å¯«è¨­è¨ˆè¡¨å–®</button></div>
  </div>
  <div class="btn-group"><button class="back-btn" onclick="showStep('step6')">é‡æ–°æŒ‘é¸é…è‰²</button></div>
</section>

<script>
const imageLabelMap = {
  "ç±ƒçƒ": "Basketball", "æ’çƒ": "Volleyball", "ç¾½çƒ": "Badminton",
  "é›™é¢çƒè¡£+å–®é¢çƒè¤²": "Reversible Jersey + Shorts", "å–®é¢çƒè¡£*2+å–®é¢çƒè¤²": "2 Jerseys + Shorts", "å–®é¢çƒè¡£*2+å–®é¢çƒè¤²*2": "2 Jerseys + 2 Shorts",
  "æ‹‰å…‹è˜­è¢–": "Raglan Sleeve", "SGBçŸ­è¢–": "SGB Sleeve", "ç·´ç¿’è¡£": "Practice Jersey",
  "ç¶“å…¸çƒè¤²": "Classic Shorts", "çŸ­ç‰ˆçƒè¤²": "Short Shorts", "æ’ç¾½çƒä¸Šè¡£": "Top Only",
  "æ’ç¾½çƒä¸Šè¡£<br>+SGBç´ è‰²æ’çƒè¤²": "Top + Shorts", "ç·´ç¿’è¡£ä¸€å£åƒ¹": "Practice Only", "ç·´ç¿’è¡£+SGBç´ è‰²æ’çƒè¤²": "Practice + Shorts",
  "å–®é¢åœ“é ˜": "Single_Side_Round", "å–®é¢Vé ˜": "Single_Side_V", "é›™é¢åœ“é ˜": "Reversible Jersey",
};

const data = {
  "ç±ƒçƒ": {
    items: { "é›™é¢çƒè¡£+å–®é¢çƒè¤²": ["é›™é¢åœ“é ˜"], "å–®é¢çƒè¡£*2+å–®é¢çƒè¤²": ["å–®é¢åœ“é ˜", "å–®é¢Vé ˜"], "å–®é¢çƒè¡£*2+å–®é¢çƒè¤²*2": ["å–®é¢åœ“é ˜", "å–®é¢Vé ˜"] },
    shorts: ["ç¶“å…¸çƒè¤²", "çŸ­ç‰ˆçƒè¤²"],
    styles: {
      "é›™é¢åœ“é ˜": ["S41","S42","S43","S44","S31","S32","S21","S23","S24","S10","S11","S12","S13","S01","S03","S07","S09"],
      "å–®é¢åœ“é ˜": ["S31","S32","S21","S23","S24","S10","S11","S12","S13","S01","S03","S07","S09"],
      "å–®é¢Vé ˜": ["S41","S42","S43","S44"]
    },
    colors: {
      S31: ["SB", "BK", "BS", "CB", "FP", "FG", "CR", "BP", "BL", "LV", "MB", "EP", "TH", "PH", "BR", "MP", "NY", "GS", "CL", "LA", "MT", "MG", "DL", "MH"],
      S32: ["BK", "NW", "AP", "MG", "WB", "PW", "CR"], S21: ["GR", "DB", "DR", "ZG", "PP", "IG", "WB"],
      S23: ["WR", "NW", "BK", "PP", "PW", "CR", "VG", "GBL", "GOY", "EP", "CB", "LY", "MG", "MB", "WB"],
      S24: ["NW", "BK", "KB", "PP", "CY", "BO", "VG"], S10: ["BK", "WR", "AG", "BB", "AY", "LG"],
      S11: ["AY", "BK", "AG", "WG", "WR", "BB"], S12: ["BK", "CB", "LG", "AY", "AG", "WR"],
      S13: ["BK", "DT", "SG", "DB", "WR", "GG"], S01: ["BK", "AG", "AR", "AY", "BB", "LB", "WG"],
      S03: ["BK", "AG", "NW", "AY", "AR", "LB", "WG"], S07: ["BK", "AG", "BB", "AY", "AR", "LB", "WG"],
      S09: ["BK", "AG", "BB", "AY", "LB", "WG"], S41: ["BK", "KB", "PP", "DR", "AG", "GL"],
      S42: ["BK", "SV", "PP", "CB", "DR", "GL"], S43: ["BK", "PP", "DE", "CR", "AY", "GL"],
      S44: ["DNB", "DNS", "DNG", "DNK"]
    }
  },
  "æ’çƒ": {
    items: { "æ’ç¾½çƒä¸Šè¡£<br>+SGBç´ è‰²æ’çƒè¤²": ["æ‹‰å…‹è˜­è¢–", "SGBçŸ­è¢–"], "ç·´ç¿’è¡£+SGBç´ è‰²æ’çƒè¤²": ["ç·´ç¿’è¡£"], "æ’ç¾½çƒä¸Šè¡£": ["æ‹‰å…‹è˜­è¢–", "SGBçŸ­è¢–"], "ç·´ç¿’è¡£ä¸€å£åƒ¹": ["ç·´ç¿’è¡£"] },
    styles: { "æ‹‰å…‹è˜­è¢–": ["V41","V42","V43","V44","V45","V46","V47","V48","V49"], "SGBçŸ­è¢–": ["V31","V32"], "ç·´ç¿’è¡£": ["T01"] },
    colors: {
      V41: ["WB", "BK", "MB", "PP", "LB", "MG", "PW", "LV", "GL", "DR"], V42: ["NB", "WB", "PW", "PP", "BO", "BK"],
      V43: ["FG", "BK", "GB", "MG", "PB", "AW"], V44: ["AW", "BK", "GB", "TB", "QP", "SV"],
      V45: ["LB", "OR", "GL", "NW", "PP", "DR"], V46: ["NB", "QP", "PP", "MT", "AW", "RB"],
      V31: ["AW", "EG", "TCG", "WBI", "PB", "QP"], V32: ["QP", "DW", "UN", "FG", "KG", "FP"],
      V47: ["TB", "BW", "OY", "WR", "LG"], V48: ["BK", "AW", "YY", "WR", "TPB"], V49: ["BK", "OY", "WBI", "WR", "TCG"],
      T01: ["ç™½", "æ·ºç°", "æ·±ç°", "é»‘", "èŠ¥æœ«é»ƒ", "å—ç“œæ©˜", "è¢å…‰ç¶ ", "è¢å…‰é»ƒ", "ç²‰ç´…", "ç«ç´…", "ç´…", "é…’ç´…", "å¤©ç©ºè—", "é»ƒ", "æ·ºç´«", "æ·±ç´«", "æ°´è—", "é¯¨é­šè—", "å¯¶è—", "ä¸ˆé’", "æµ·è—", "è‰ç¶ ", "å¢¨ç¶ ", "å¡å…¶"]
    }
  },
  "ç¾½çƒ": {
    items: { "æ’ç¾½çƒä¸Šè¡£<br>+SGBç´ è‰²æ’çƒè¤²": ["æ‹‰å…‹è˜­è¢–", "SGBçŸ­è¢–"], "ç·´ç¿’è¡£+SGBç´ è‰²æ’çƒè¤²": ["ç·´ç¿’è¡£"], "æ’ç¾½çƒä¸Šè¡£": ["æ‹‰å…‹è˜­è¢–", "SGBçŸ­è¢–"], "ç·´ç¿’è¡£ä¸€å£åƒ¹": ["ç·´ç¿’è¡£"] },
    styles: { "æ‹‰å…‹è˜­è¢–": [], "SGBçŸ­è¢–": ["B21","B11","B12","B13"], "ç·´ç¿’è¡£": ["T01"] },
    colors: {
      B21: ["NB", "CB", "PB", "BO", "BK"], B11: ["BK", "KC", "KB", "WR", "BO"],
      B12: ["GB", "BK", "NTY", "GA", "JG"], B13: ["BK", "GB", "NTY", "AW", "GA"],
      T01: ["ç™½", "æ·ºç°", "æ·±ç°", "é»‘", "èŠ¥æœ«é»ƒ", "å—ç“œæ©˜", "è¢å…‰ç¶ ", "è¢å…‰é»ƒ", "ç²‰ç´…", "ç«ç´…", "ç´…", "é…’ç´…", "å¤©ç©ºè—", "é»ƒ", "æ·ºç´«", "æ·±ç´«", "æ°´è—", "é¯¨é­šè—", "å¯¶è—", "ä¸ˆé’", "æµ·è—", "è‰ç¶ ", "å¢¨ç¶ ", "å¡å…¶"]
    }
  }
};

let selections = { sport: "", item: "", jerseyType: "", shortsType: "ç„¡", style: "", color: "" };

function showStep(stepId) {
  const allSections = document.querySelectorAll('section');
  const stepIndex = parseInt(stepId.replace('step', '')) - 1;
  
  allSections.forEach(s => {
    s.classList.remove('active');
    setTimeout(() => { if(s.id !== stepId) s.style.display = 'none'; }, 500);
  });

  const target = document.getElementById(stepId);
  target.style.display = 'block';
  window.scrollTo({ top: 0, behavior: 'smooth' });
  setTimeout(() => target.classList.add('active'), 50);

  const dots = document.querySelectorAll('.step-dot');
  dots.forEach((dot, idx) => { dot.classList.toggle('active', idx <= stepIndex); });

  if(stepId === 'step7') renderSummary();
}

function createOption(imgSrc, label, callback, index = 0) {
  const div = document.createElement('div');
  div.className = 'option';
  div.innerHTML = `
    <img src="${imgSrc}" class="option-img" loading="lazy" onerror="this.src='images/default.png'">
    <div class="label">${label}</div>
  `;
  div.onclick = callback;
  setTimeout(() => div.classList.add('show'), index * 60);
  return div;
}

function init() {
  const sportDiv = document.getElementById('sports');
  Object.keys(data).forEach((sport, idx) => {
    sportDiv.appendChild(createOption(`images/sports/${imageLabelMap[sport] || sport}.png`, sport, () => {
      selections.sport = sport; showItems(sport);
    }, idx));
  });
}

function showItems(sport) {
  const div = document.getElementById('items');
  div.innerHTML = '';
  Object.keys(data[sport].items).forEach((item, idx) => {
    div.appendChild(createOption(`images/items/${imageLabelMap[item.replace('<br>', '')] || item.replace('<br>', '')}.png`, item, () => {
      selections.item = item;
      if (item.includes("ç·´ç¿’è¡£")) {
        selections.jerseyType = "ç·´ç¿’è¡£"; selections.style = "T01"; showColors(sport, "T01");
      } else { showJerseyTypes(sport, item); }
    }, idx));
  });
  showStep('step2');
}

function showJerseyTypes(sport, item) {
  const div = document.getElementById('jerseyTypes'); div.innerHTML = '';
  data[sport].items[item].forEach((type, idx) => {
    if (sport === "ç¾½çƒ" && type === "æ‹‰å…‹è˜­è¢–") return;
    div.appendChild(createOption(`images/styles/${imageLabelMap[type] || type}.png`, type, () => {
      selections.jerseyType = type;
      sport === 'ç±ƒçƒ' ? showShortsTypes(sport) : showStyles(sport, type);
    }, idx));
  });
  showStep('step3');
}

function showShortsTypes(sport) {
  const div = document.getElementById('shortsTypes'); div.innerHTML = '';
  data[sport].shorts.forEach((type, idx) => {
    div.appendChild(createOption(`images/styles/${imageLabelMap[type] || type}.png`, type, () => {
      selections.shortsType = type; showStyles(sport, selections.jerseyType);
    }, idx));
  });
  showStep('step4');
}

function showStyles(sport, jerseyType) {
  const div = document.getElementById('styles'); div.innerHTML = '';
  data[sport].styles[jerseyType].forEach((style, idx) => {
    div.appendChild(createOption(`images/styles/${style}.png`, style, () => {
      selections.style = style; showColors(sport, style);
    }, idx));
  });
  document.getElementById('backToStep5').onclick = () => showStep(sport === 'ç±ƒçƒ' ? 'step4' : 'step3');
  showStep('step5');
}

function showColors(sport, style) {
  const div = document.getElementById('colors'); div.innerHTML = '';
  (data[sport].colors[style] || []).forEach((color, idx) => {
    const label = `${style}-${color}`;
    div.appendChild(createOption(`images/colors/${label}.png`, label, () => {
      selections.color = label; showStep('step7');
    }, idx));
  });
  document.getElementById('backToStep6').onclick = () => {
    selections.item.includes("ç·´ç¿’è¡£") ? showStep('step2') : showStep('step5');
  };
  showStep('step6');
}

function renderSummary() {
  document.getElementById('summary').innerHTML = `
    <p>ğŸ”¹ é‹å‹•é¡å‹ï¼š<span>${selections.sport}</span></p>
    <p>ğŸ”¹ é¸æ“‡å“é …ï¼š<span>${selections.item.replace('<br>', ' ')}</span></p>
    <p>ğŸ”¹ çƒè¡£ç‰ˆå‹ï¼š<span>${selections.jerseyType}</span></p>
    ${selections.sport === 'ç±ƒçƒ' ? `<p>ğŸ”¹ çƒè¤²ç‰ˆå‹ï¼š<span>${selections.shortsType}</span></p>` : ''}
    <p>ğŸ”¹ æ¬¾å¼ä»£ç¢¼ï¼š<span>${selections.style}</span></p>
    <p>ğŸ”¹ æœ€çµ‚é…è‰²ï¼š<span>${selections.color}</span></p>
  `;
}

function goToRagic() {
  const params = new URLSearchParams({
    webview: "", webaction: "form", ver: "new", version: "2",
    pfv1001193: selections.sport, pfv1000069: selections.item,
    pfv1002088: selections.shortsType, pfv1000071: selections.style, pfv1001153: selections.color
  });
  window.open(`https://ap9.ragic.com/jersey/forms6/16?${params.toString()}`, '_blank');
}

init();
</script>
</body>
</html>
