<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Jersey 圖片選單</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 20px; }
    section { display: none; margin-top: 20px; }
    .active { display: block; }
    .option-img {
      width: 160px; margin: 10px; cursor: pointer;
      border: 2px solid transparent; transition: border 0.3s;
    }
    .option-img:hover { border: 2px solid #007bff; }
    .grid { display: flex; flex-wrap: wrap; justify-content: center; }
    #submit-btn {
      display: inline-block;
      margin-top: 30px;
      padding: 12px 24px;
      background-color: #007bff;
      color: white;
      border-radius: 6px;
      font-size: 18px;
      text-decoration: none;
      cursor: pointer;
    }
    .label-text {
      display: block;
      margin-top: 8px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <h2>Jersey 圖片選單</h2>

  <!-- Step 1: 運動類型 -->
  <section id="step1" class="active">
    <h3>1. 選擇運動類型</h3>
    <div class="grid">
      <div class="option"><img src="images/basketball.jpg" class="option-img" onclick="selectSport('籃球')"><span class="label-text">籃球</span></div>
      <div class="option"><img src="images/volleyball.jpg" class="option-img" onclick="selectSport('排球')"><span class="label-text">排球</span></div>
      <div class="option"><img src="images/badminton.jpg" class="option-img" onclick="selectSport('羽球')"><span class="label-text">羽球</span></div>
    </div>
  </section>

  <!-- Step 2: 訂購品項 -->
  <section id="step2">
    <h3>2. 選擇訂購品項</h3>
    <div class="grid" id="item-options"></div>
  </section>

  <!-- Step 3: 款式 -->
  <section id="step3">
    <h3>3. 選擇款式</h3>
    <div class="grid" id="style-options"></div>
  </section>

  <!-- Step 4: 配色 -->
  <section id="step4">
    <h3>4. 選擇配色</h3>
    <div class="grid" id="color-options"></div>
    <button id="submit-btn" onclick="openForm()" disabled>前往填寫表單</button>
  </section>

<script>
  const sportData = {
    "籃球": ["雙面球衣+單面球褲", "單面球衣*2+單面球褲", "單面球衣*2+單面球褲*2"],
    "排球": ["排羽球上衣+SGB素色排球褲", "練習衣一口價", "練習衣+SGB素色排球褲", "排羽球上衣"],
    "羽球": ["排羽球上衣+SGB素色排球褲", "練習衣一口價", "練習衣+SGB素色排球褲", "排羽球上衣"]
  };

  let selections = { sport: '', item: '', style: '', color: '' };

  function showStep(id) {
    document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  function selectSport(type) {
    selections.sport = type;
    const container = document.getElementById('item-options');
    container.innerHTML = '';
    sportData[type].forEach(item => {
      const div = document.createElement('div');
      div.className = 'option';
      div.innerHTML = `<img src="images/item.jpg" class="option-img" onclick="selectItem('${item}')"><span class="label-text">${item}</span>`;
      container.appendChild(div);
    });
    showStep('step2');
  }

  function selectItem(item) {
    selections.item = item;
    const container = document.getElementById('style-options');
    container.innerHTML = '';
    const style = "S41";
    const div = document.createElement('div');
    div.className = 'option';
    div.innerHTML = `<img src="images/s41.jpg" class="option-img" onclick="selectStyle('${style}')"><span class="label-text">${style}</span>`;
    container.appendChild(div);
    showStep('step3');
  }

  function selectStyle(style) {
    selections.style = style;
    const container = document.getElementById('color-options');
    container.innerHTML = '';
    const colors = ["BK", "KB", "PP", "DR", "AG"];
    colors.forEach(k => {
      const code = `${style}-${k}`;
      const div = document.createElement('div');
      div.className = 'option';
      div.innerHTML = `<img src="images/${style.toLowerCase()}-${k.toLowerCase()}.jpg" class="option-img" onclick="selectColor('${code}', this)"><span class="label-text">${code}</span>`;
      container.appendChild(div);
    });
    showStep('step4');
  }

  function selectColor(code, imgElement) {
    selections.color = code;
    document.querySelectorAll('.option-img').forEach(i => i.style.border = '2px solid transparent');
    imgElement.style.border = '2px solid red';
    document.getElementById('submit-btn').disabled = false;
  }

  function openForm() {
    const base = "https://ap9.ragic.com/jersey/forms6/16";
    const params = [
      'webview',
      'webaction=form',
      'ver=new',
      'version=2',
      `pfv1001193=${encodeURIComponent(selections.sport)}`,
      `pfv1000069=${encodeURIComponent(selections.item)}`,
      `pfv1002088=${encodeURIComponent("短版球褲")}`,
      `pfv1000071=${encodeURIComponent(selections.style)}`,
      `pfv1001153=${encodeURIComponent(selections.color)}`
    ].join('&');
    const url = `${base}?${params}`;
    const popup = window.open(url, 'RagicForm', 'width=1000,height=800');
    if (!popup || popup.closed || typeof popup.closed === 'undefined') {
      window.location.href = url;
    }
  }
</script>
</body>
</html>
